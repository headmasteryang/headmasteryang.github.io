<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>在&#34;体验静态的快&#34;之前的痛 | lhr&#39;s blog</title>
<link rel="shortcut icon" href="https://blog.gylhr.com/favicon.ico?v=1627834365741">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://blog.gylhr.com/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="在&#34;体验静态的快&#34;之前的痛 | lhr&#39;s blog - Atom Feed" href="https://blog.gylhr.com/atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



    <meta name="description" content="经常有一种声音将Wordpress架构臃肿，但我觉得实际上它是一个全平台通用的程序，不可避免的要做一个“折衷派”。这也就导致了需要繁杂的mysql和php——在大型网站上运行非常靠谱，但我这种只买得起512mb内存的小鸡的人，想要跑点其他小..." />
    <meta name="keywords" content="" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://blog.gylhr.com">
  <img class="avatar" src="https://blog.gylhr.com/images/avatar.png?v=1627834365741" alt="">
  </a>
  <h1 class="site-title">
    lhr&#39;s blog
  </h1>
  <p class="site-description">
    <h2>"彼时彼刻，恰如此时此刻。"</h2>
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          首页
        </a>
      
    
      
        <a href="/archives" class="menu">
          归档
        </a>
      
    
      
        <a href="/tags" class="menu">
          标签
        </a>
      
    
      
        <a href="/post/about" class="menu">
          关于
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              在&#34;体验静态的快&#34;之前的痛
            </h2>
            <div class="post-info">
              <span>
                2021-08-01
              </span>
              <span>
                3 min read
              </span>
              
            </div>
            
            <div class="post-content-wrapper">
              <div class="post-content">
                <p>经常有一种声音将Wordpress架构臃肿，但我觉得实际上它是一个全平台通用的程序，不可避免的要做一个“折衷派”。这也就导致了需要繁杂的mysql和php——在大型网站上运行非常靠谱，但我这种只买得起512mb内存的小鸡的人，想要跑点其他小程序就不太现实。同时，它作为动态的缺点就是每一次访问都需要向后端发起请求然后生成，遇到ddcc攻击直接暴毙。</p>
<p>静态则是前端存着实实在在的文件，这样响应就快很多。著名架构由hexo之类的。这次用的Gridea是个图形化的编辑器，省去了git到库的那些纷繁复杂的指令，提交更方便些。</p>
<p>搭建蛮简单的，网上也有教程，不作展开。这里提下矛盾主要是Github Pages已经被老大哥盯上了，间歇性阻断搞人心态，TLS证书是R3，速度慢得一批还不讨好国内某些资本家运作的浏览器；网上搜了一下，速度一般，经常被阻断的也不是个例。<img src="https://lib.gylhr.com/20210821/connectionreset.png" alt="TCP Connection Reset" loading="lazy"></p>
<p>Coding Pages的页面在国内，用他们给的域名其实还蛮快的，ping 22ms，但如果要接入自己的域名就必须买爆贵的腾讯云境外线路，用完免费余额以后就是0.02/Gb的价格。他们的线路我测试过了，CN2一点没有，接入的是香港Amazon和HP的数据中心，线路上有163优化可是在国内的请求会遇到TCP连接重置，在国外一切正常（站长工具跑下来也基本是）<img src="https://lib.gylhr.com/20210821/redstaroverchina.png" alt="可以说是红星照耀中国了" loading="lazy"></p>
<p>可见其实Gridea提供的两个选项里面没有一个好的。</p>
<p>所以我选了Cloudflare Pages来优化。自选IP蛮好用的，其实对于动态页面来讲Cloudflare在国内确实减速，但是静态，而且又直接搭在他们服务器上，回源可以不计，还是有加速效果。我选的是他们没有公开列出的一个网段，用的人少些，速度能赶上苏卡大佬的。<br>
<img src="https://lib.gylhr.com/20210821/good-cloudflare.png" alt="对比的情况" loading="lazy"></p>
<p>这么一比较下来还是挺香的，图床还是用自己的vps来建，套Arvancloud CDN，灵活得多。</p>
<p>参见<a href="https://www.v2ex.com/t/768823">不懂就问， Github Page 站点速度如何优化</a></p>

              </div>
              <div class="toc-container">
                
              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">下一篇</div>
            <a href="https://blog.gylhr.com/geng-xin-ce-shi/">
              <h3 class="post-title">
                更新测试
              </h3>
            </a>
          </div>
        

        

        <div class="site-footer">
  Powered by <a href="https://www.gylhr.com/" target="_blank">int_尊敬的杨校长</a>
  <a class="rss" href="https://blog.gylhr.com/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>

      </div>
    </div>

    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      // This should probably be throttled.
      // Especially because it triggers during smooth scrolling.
      // https://lodash.com/docs/4.17.10#throttle
      // You could do like...
      // window.addEventListener("scroll", () => {
      //    _.throttle(doThatStuff, 100);
      // });
      // Only not doing it here to keep this Pen dependency-free.

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>
  </body>
</html>
